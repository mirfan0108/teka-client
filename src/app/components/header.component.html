<template>
    <header class="main-header header-style-seven">
        <div class="header-top">
            <div class="auto-container">
                <div class="inner-container clearfix">
                    <div class="top-right">
                        <ul class="social-icon-four clearfix">
                            <li><a href="javascript:;" @click="setLang(1)">ID</a></li>
                            <li><a href="javascript:;" @click="setLang(2)">EN</a></li>
                            <li><a href="javascript:;" @click="setLang(3)">DE</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="header-lower">
            <div class="auto-container">
                <div class="main-box clearfix">
                    <div class="logo-box">
                        <div class="logo">
                            <a href="/"><img src="/assets/images/logo.png" alt="teka logo"  width="200"></a>
                        </div>
                    </div>
    
                    <div class="nav-outer">
                        <nav class="main-menu navbar-expand-md ">
                            <div class="navbar-header">  
                                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                                    <span class="icon flaticon-menu-button"></span>
                                </button>
                            </div>
                            
                            <div class="collapse navbar-collapse clearfix" id="navbarSupportedContent">
                                <ul class="navigation clearfix">
                                    <li :class="$root.$router.history.current.name == 'home.page.html' ? 'current' : ''">
                                        <a href="/">
                                            {{ 
                                                $root.lang() == 1 ? 'Beranda' : 
                                                $root.lang() == 2 ? 'Home' : 
                                                $root.lang() == 3 ? 'Zuhause' : ''
                                            }}
                                        </a>
                                    </li>
                                    <li :class="$root.$router.history.current.name == 'about.page.html' ? 'current dropdown' : 'dropdown'">
                                        <a href="javascript:;" >
                                            {{ 
                                                $root.lang() == 1 ? 'Tentang Teka' : 
                                                $root.lang() == 2 ? 'About Us' : 
                                                $root.lang() == 3 ? 'Über uns' : ''
                                            }}
                                        </a>
                                        <ul>
                                            <li>
                                                <a href="/about">
                                                    {{ 
                                                        $root.lang() == 1 ? 'Kenapa Kami' : 
                                                        $root.lang() == 2 ? 'Why Us' : 
                                                        $root.lang() == 3 ? 'warum wir' : ''
                                                    }}
                                                </a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li :class="$root.$router.history.current.name == 'product.page.html' ? 'current dropdown' : 'dropdown'">
                                        <a href="javascript:void(0)">
                                            {{ 
                                                $root.lang() == 1 ? 'Produk' : 
                                                $root.lang() == 2 ? 'Product' : 
                                                $root.lang() == 3 ? 'Produkt' : ''
                                            }}
                                        </a>
                                        <ul>
                                            <li>
                                                <a href="/product">
                                                    {{ 
                                                        $root.lang() == 1 ? 'Semua' : 
                                                        $root.lang() == 2 ? 'All' : 
                                                        $root.lang() == 3 ? 'Alles' : ''
                                                    }}
                                                </a>
                                            </li>
                                            <li v-for="construction in constructions">
                                                <a :href="'/product?construction='+construction.id">{{construction.name}}</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li :class="$root.$router.history.current.name == 'gallery.page.html' ? 'current' : ''">
                                        <a href="/gallery">
                                            {{ 
                                                $root.lang() == 1 ? 'Galeri Proyek' : 
                                                $root.lang() == 2 ? 'Project Gallery' : 
                                                $root.lang() == 3 ? 'Projektgalerie' : ''
                                            }}
                                        </a>
                                    </li>
                                    <li :class="$root.$router.history.current.name == 'contact.page.html' ? 'current' : ''">
                                        <a href="/contact-us">
                                            {{ 
                                                $root.lang() == 1 ? 'Sumber Daya' : 
                                                $root.lang() == 2 ? 'Resource' : 
                                                $root.lang() == 3 ? 'Resource' : ''
                                            }}
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </nav>                       
                        
                    </div>
                </div>
            </div>
        </div>

                <!-- Sticky Header  -->
        <div class="sticky-header">
            <div class="auto-container clearfix">
                <!--Logo-->
                <div class="logo pull-left">
                    <a href="/" title=""><img src="/assets/images/logo.png" alt="teka logo" width="150"></a>
                </div>
                <!--Right Col-->
                <div class="pull-right">
                    <!-- Main Menu -->
                    <nav class="main-menu">
                        <div class="navbar-collapse show collapse clearfix">
                            <ul class="navigation clearfix">
                                <li :class="$root.$router.history.current.name == 'home.page.html' ? 'current' : ''">
                                    <a href="/">
                                        {{ 
                                            $root.lang() == 1 ? 'Beranda' : 
                                            $root.lang() == 2 ? 'Home' : 
                                            $root.lang() == 3 ? 'Zuhause' : ''
                                        }}
                                    </a>
                                </li>
                                <li :class="$root.$router.history.current.name == 'about.page.html' ? 'current dropdown' : 'dropdown'">
                                    <a href="javascript:;" >
                                        {{ 
                                            $root.lang() == 1 ? 'Tentang Teka' : 
                                            $root.lang() == 2 ? 'About Us' : 
                                            $root.lang() == 3 ? 'Über uns' : ''
                                        }}
                                    </a>
                                    <ul>
                                        <li>
                                            <a href="/about">
                                                {{ 
                                                    $root.lang() == 1 ? 'Kenapa Kami' : 
                                                    $root.lang() == 2 ? 'Why Us' : 
                                                    $root.lang() == 3 ? 'warum wir' : ''
                                                }}
                                            </a>
                                        </li>
                                    </ul>
                                </li>
                                <li :class="$root.$router.history.current.name == 'product.page.html' ? 'current dropdown' : 'dropdown'">
                                    <a href="javascript:void(0)">
                                        {{ 
                                            $root.lang() == 1 ? 'Produk' : 
                                            $root.lang() == 2 ? 'Product' : 
                                            $root.lang() == 3 ? 'Produkt' : ''
                                        }}
                                    </a>
                                    <ul>
                                        <li>
                                            <a href="/product">
                                                {{ 
                                                    $root.lang() == 1 ? 'Semua' : 
                                                    $root.lang() == 2 ? 'All' : 
                                                    $root.lang() == 3 ? 'Alles' : ''
                                                }}
                                            </a>
                                        </li>
                                        <li v-for="construction in constructions">
                                            <a :href="'/product?construction='+construction.id">{{construction.name}}</a>
                                        </li>
                                    </ul>
                                </li>
                                <li :class="$root.$router.history.current.name == 'gallery.page.html' ? 'current' : ''">
                                    <a href="/gallery">
                                        {{ 
                                            $root.lang() == 1 ? 'Galeri Proyek' : 
                                            $root.lang() == 2 ? 'Project Gallery' : 
                                            $root.lang() == 3 ? 'Projektgalerie' : ''
                                        }}
                                    </a>
                                </li>
                                <li :class="$root.$router.history.current.name == 'contact.page.html' ? 'current' : ''">
                                    <a href="/contact-us">
                                        {{ 
                                            $root.lang() == 1 ? 'Sumber Daya' : 
                                            $root.lang() == 2 ? 'Resource' : 
                                            $root.lang() == 3 ? 'Resource' : ''
                                        }}
                                    </a>
                                </li>
                                
                            </ul> 
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </header>
</template>

<script>
    import ApiFrame from "../services/api/content.js"
    export default {
        data() {
            return {
                constructions: [],
                langs: []
            }
        },
        beforeMount() {},
        mounted() {
            this.constructions = ApiFrame.getConstruction()
            this.langs = ApiFrame.getLang()
        },
        methods: {
            setLang(lang) {
                sessionStorage.setItem('_LANG', lang)
                window.location.reload()
            },
            toTitleCase(text) {
                var sentence = text.toLowerCase().split(" ");
                let result = ''
                for(var i = 0; i< sentence.length; i++){
                    result += sentence[i][0].toUpperCase() + sentence[i].slice(1)+ ' '
                }
                return result
            }
        }
        
    }
</script>